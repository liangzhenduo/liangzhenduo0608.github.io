<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="/images/icon.png">
  
  <title>Shintaku&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Shintaku's Blog">
<meta property="og:url" content="https://www.shintaku.cc/page/2/index.html">
<meta property="og:site_name" content="Shintaku's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shintaku's Blog">
<link rel="publisher" href="114761524022260760000">
  
    <link rel="alternative" href="/atom.xml" title="Shintaku&#39;s Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Shintaku&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">希パワーたーっぷり注入！はーいプシュッ</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=fa-home title='Home'></i> Home</a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=fa-user title='About'></i> About</a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=fa-archive title='Archives'></i> Archives</a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=fa-tags title='Tags'></i> Tags</a>
          
        
          
            <a class="main-nav-link" href="/gallery"><i class=fa-camera title='Gallery'></i> Gallery</a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=fa-trophy title='Works'></i> Works</a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://www.shintaku.cc"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          <section id="main" class='pjax'>
  
    <article id="post-verilog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2016/04/11/verilog/" class="article-date">
  <time datetime="2016-04-11T13:11:11.000Z" itemprop="datePublished">2016-04-11</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/手帐/">手帐</a>►<a class="article-category-link" href="/categories/手帐/课程/">课程</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/vlbanner.png" rel="gallery_civi1rlxs001jjzprumcal0gr">
        <img src="/img/vlbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/11/verilog/">Mac上进行Verilog仿真</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2016/04/11/verilog/" data-id="civi1rlxs001jjzprumcal0gr" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2016/04/11/verilog/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Verilog/">Verilog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>这学期上VLSI系统设计这门课，同时顺带着把计算机设计与调试的课程设计做了。往FPGA上烧写之前要用Verilog进行仿真，在实验室直接用机房的ModelSim仿真了，但是课下在虚拟机上做有诸多的不便，于是就研究了一下在Mac下写Verilog的方法。</p>
<h1 id="配置Sublime代码高亮"><a href="#配置Sublime代码高亮" class="headerlink" title="配置Sublime代码高亮"></a>配置Sublime代码高亮</h1><p>Sublime Text默认是不支持Verilog代码高亮的，可以通过安装插件增加对其的支持。首先要安装Sublime包管理工具，按<code>control+` </code>打开控制台，并运行以下代码（以Sublime Text 2为例）：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib2,os,hashlib; h = <span class="string">'2915d1851351e5ee549c20394736b442'</span> + <span class="string">'8bc59f460fa1548d1514676163dafc88'</span>; pf = <span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(ipp) <span class="keyword">else</span> <span class="keyword">None</span>; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( <span class="string">'http://packagecontrol.io/'</span> + pf.replace(<span class="string">' '</span>, <span class="string">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), <span class="string">'wb'</span> ).write(by) <span class="keyword">if</span> dh == h <span class="keyword">else</span> <span class="keyword">None</span>; print(<span class="string">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h) <span class="keyword">if</span> dh != h <span class="keyword">else</span> <span class="string">'Please restart Sublime Text to finish installation'</span>)</div></pre></td></tr></table></figure>
<p>安装完后重启，按<code>command+shift+P</code>唤出命令面板，打开<code>Install Package</code>包管理工具：</p>
<p><img src="/img/vlinstall.png" alt="Install Package"></p>
<p>然后查找<code>Verilog</code>，将搜到的自动补全和代码高亮插件装上重启就可以了：</p>
<p><img src="/img/vlverilog.png" alt="Verilog"></p>
<h1 id="安装Icarus-Verilog"><a href="#安装Icarus-Verilog" class="headerlink" title="安装Icarus Verilog"></a>安装Icarus Verilog</h1><p>Icarus Verilog是Verilog硬件描述语言的实现工具之一。该软件以GNU通用公共许可协议发布，是一个自由软件。它支持Verilog对应的的IEEE 1995、IEEE 2001和IEEE 2005三个不同的版本，并对SystemVerilog的部分内容提供支持。</p>
<p>首先保证已经安装了Homebrew，然后通过brew安装：</p>
<pre><code>brew install icarus-verilog
</code></pre><h1 id="安装Scansion"><a href="#安装Scansion" class="headerlink" title="安装Scansion"></a>安装Scansion</h1><p>Scansion是Mac平台下的一个VCD文件查看工具，可以去<a href="http://www.logicpoet.com/downloads/" target="_blank" rel="external">http://www.logicpoet.com/downloads/</a>下载其最新版本并安装。</p>
<h1 id="编译仿真"><a href="#编译仿真" class="headerlink" title="编译仿真"></a>编译仿真</h1><p>随便新建一个测试文件叫test.v：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">module</span> vaddsws( vra, vrb, vrt, sat );</div><div class="line"></div><div class="line"><span class="keyword">input</span>  [<span class="number">31</span> : <span class="number">0</span>] vra;</div><div class="line"><span class="keyword">input</span>  [<span class="number">31</span> : <span class="number">0</span>] vrb;</div><div class="line"><span class="keyword">output</span> [<span class="number">31</span> : <span class="number">0</span>] vrt;</div><div class="line"><span class="keyword">output</span>          sat;</div><div class="line"></div><div class="line"><span class="keyword">wire</span>   [<span class="number">31</span> : <span class="number">0</span>] sum;</div><div class="line"><span class="keyword">wire</span>   [<span class="number">31</span> : <span class="number">0</span>] vrt;</div><div class="line"><span class="keyword">wire</span>            sat;</div><div class="line"></div><div class="line"><span class="keyword">assign</span> &#123;sat, sum&#125;	= vra + vrb;</div><div class="line"><span class="keyword">assign</span> vrt = (vra[<span class="number">31</span>]^vrb[<span class="number">31</span>]) ? sum : (vra[<span class="number">31</span>]&amp;&amp;vrb[<span class="number">31</span>] ? (sum[<span class="number">31</span>] ? sum : <span class="number">32'h80000000</span>) : (sum[<span class="number">31</span>] ? <span class="number">32'h7fffffff</span> : sum));</div><div class="line"></div><div class="line"><span class="keyword">endmodule</span></div></pre></td></tr></table></figure>
<p>再对其新建testbench文件test_tb.v：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">`<span class="meta-keyword">timescale</span> 1ns/100ps</span></div><div class="line"><span class="meta">`<span class="meta-keyword">include</span> "test.v"</span></div><div class="line"></div><div class="line"><span class="keyword">module</span> vaddsws_tb;</div><div class="line"></div><div class="line"><span class="keyword">reg</span>	[<span class="number">31</span>: <span class="number">0</span>]	vra;</div><div class="line"><span class="keyword">reg</span>	[<span class="number">31</span>: <span class="number">0</span>]	vrb;</div><div class="line"><span class="keyword">wire</span>	[<span class="number">31</span>: <span class="number">0</span>]	vrt;</div><div class="line"><span class="keyword">wire</span>	sat;</div><div class="line"></div><div class="line"><span class="keyword">initial</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">	<span class="built_in">$dumpfile</span>(<span class="string">"test.vcd"</span>);</div><div class="line">	<span class="built_in">$dumpvars</span>(<span class="number">0</span>, vaddsws_tb);</div><div class="line">	<span class="keyword">assign</span> vra=<span class="number">32'hffffffff</span>;</div><div class="line">	<span class="keyword">assign</span> vrb=<span class="number">32'hffffffff</span>;</div><div class="line">	#<span class="number">100</span></div><div class="line">	<span class="keyword">assign</span> vra=<span class="number">32'h01234567</span>;</div><div class="line">	<span class="keyword">assign</span> vrb=<span class="number">32'h76543210</span>;</div><div class="line">	#<span class="number">100</span></div><div class="line">	<span class="built_in">$finish</span>;</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">vaddsws add( <span class="variable">.vra</span>(vra), <span class="variable">.vrb</span>(vrb), <span class="variable">.vrt</span>(vrt), <span class="variable">.sat</span>(sat) );</div><div class="line"></div><div class="line"><span class="keyword">endmodule</span></div></pre></td></tr></table></figure>
<p>注意testbench文件的第二行中<code>include</code>宏是为了引用前一个文件的模块定义，如果在Windows下用ModelSim时把它注释掉就可以了。第13行是为了生成波形文件以便在Scansion里查看。</p>
<p>源码编辑好后执行以下命令编译执行：</p>
<pre><code>iverilog -o test.vvp test_tb.v
./test.vvp
</code></pre><p>生成vcd格式的波形文件用Scansion打开即可（也可以使用命令<code>open -a Scansion test.vcd</code>）：</p>
<p><img src="/img/vltest.png" alt="输出波形"></p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-centos-lemp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2016/03/21/centos-lemp/" class="article-date">
  <time datetime="2016-03-21T13:11:11.000Z" itemprop="datePublished">2016-03-21</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>►<a class="article-category-link" href="/categories/网络/网站部署/">网站部署</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/lempbanner.png" rel="gallery_civi1rlv4000ejzpre4sor1hc">
        <img src="/img/lempbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/centos-lemp/">CentOS 7配置LEMP环境</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2016/03/21/centos-lemp/" data-id="civi1rlv4000ejzpre4sor1hc" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2016/03/21/centos-lemp/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LEMP/">LEMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VPS/">VPS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>由于最近许多服务都需要依赖LEMP（Linux、Nginx、MySQL、PHP）环境，之前旧金山机房的VPS使用CentOS 6的系统总是安装不成功，最近换了新加坡机房装了CentOS 7，所以重新完完整整的配置一遍，以便后面使用。</p>
<h1 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h1><p>MySQL直接从yum安装总是不能成功，后来索性就直接下载rpm包安装了。首先下载MySQL社区版的rpm包并执行安装：</p>
<pre><code>rpm -ivh http://repo.mysql.com/mysql-community-release-el7-7.noarch.rpm
yum update
</code></pre><p>之后安装mysql-server：</p>
<pre><code>yum install mysql-server
</code></pre><p>通过<code>mysql -V</code>命令查看版本来检查MySQL是否安装成功。</p>
<p>启动服务并设置开机启动：</p>
<pre><code>systemctl start mysqld
systemctl enable mysqld
</code></pre><p>然后配置安全脚本：</p>
<pre><code>mysql_secure_installation
</code></pre><p>这时会要求输入数据库的root密码，由于是新安装的并没有密码，所以直接回车即可。接下来会提示设置新的root密码，然后会有一些其它选项：</p>
<pre><code>Remove anonymous users? [Y/n]
Disallow root login remotely? [Y/n]
Remove test database and access to it? [Y/n]
Reload privilege tables now? [Y/n]
</code></pre><p>按需求选择即可，推荐都选Y。</p>
<p>结束后使用<code>mysql -u root -p</code>命令以root身份登录，后面输入密码就登进去了。</p>
<h1 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h1><p>yum默认安装的PHP还是5.4版本，对于需要新版本特性的用户还是通过Remi源安装好了。所以首先下载安装Remi源：</p>
<pre><code>rpm -ivh http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm
yum update
</code></pre><p>然后编辑<code>/etc/yum.repos.d/remi.repo</code>文件：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="section">[remi]</span></div><div class="line"><span class="attr">name</span>=Remi<span class="string">'s RPM repository for Enterprise Linux 7 - $basearch</span></div><div class="line">#baseurl=http://rpms.remirepo.net/enterprise/7/remi/$basearch/</div><div class="line">mirrorlist=http://rpms.remirepo.net/enterprise/7/remi/mirror</div><div class="line">enabled=1</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div></pre></td></tr></table></figure>
<p>请确保<code>[remi]</code>中的<code>enabled</code>的值是<code>1</code>。然后向下查看，在想要安装的php的版本（<code>[remi-php55]</code>或<code>[remi-php56]</code>）一段将对应的<code>enabled</code>的值改为<code>1</code>，例如：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="section">[remi-php55]</span></div><div class="line"><span class="attr">name</span>=Remi<span class="string">'s PHP 5.5 RPM repository for Enterprise Linux 7 - $basearch</span></div><div class="line">#baseurl=http://rpms.remirepo.net/enterprise/7/php55/$basearch/</div><div class="line">mirrorlist=http://rpms.remirepo.net/enterprise/7/php55/mirror</div><div class="line"># NOTICE: common dependencies are in "remi-safe"</div><div class="line">enabled=0</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div><div class="line"></div><div class="line">[remi-php56]</div><div class="line">name=Remi's PHP <span class="number">5.6</span> RPM repository for Enterprise Linux <span class="number">7</span> - <span class="variable">$basearch</span></div><div class="line"><span class="comment">#baseurl=http://rpms.remirepo.net/enterprise/7/php56/$basearch/</span></div><div class="line"><span class="attr">mirrorlist</span>=http://rpms.remirepo.net/enterprise/<span class="number">7</span>/php56/mirror</div><div class="line"><span class="comment"># NOTICE: common dependencies are in "remi-safe"</span></div><div class="line"><span class="attr">enabled</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div></pre></td></tr></table></figure>
<p>保存之后就可以用yum命令安装较新的PHP了：</p>
<pre><code>yum install php php-fpm php-mysql
</code></pre><p>当然以后如果发现缺了什么php的组件也可以通过这种方式安装，例如：</p>
<pre><code>yum install php-gd php-mcrypt php-pear
</code></pre><p>通过<code>php -v</code>命令查看版本来检查PHP是否安装成功。</p>
<p>启动PHP并设置开机启动：</p>
<pre><code>systemctl start php-fpm
systemctl enable php-fpm
</code></pre><h1 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h1><p>再使用yum安装Nginx：</p>
<pre><code>yum install nginx
</code></pre><p>通过<code>nginx -v</code>命令查看版本来检查Nginx是否安装成功。</p>
<p>启动Nginx并设置开机启动：</p>
<pre><code>systemctl start nginx
systemctl enable nginx
</code></pre><p>然后在<code>/etc/nginx/nginx.conf</code>的<code>http</code>段中加入一句：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">include /etc/nginx/conf.d/*.conf;</div></pre></td></tr></table></figure>
<p>编辑<code>/etc/nginx/conf.d/default.conf</code>文件（若不存在请新建，以后就可以在这里修改配置了）：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       80;</div><div class="line">    server_name  your_domain;</div><div class="line">    <span class="built_in">return</span> 301 https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</div><div class="line">    <span class="comment">#charset koi8-r;</span></div><div class="line"></div><div class="line">    <span class="comment">#access_log  logs/host.access.log  main;</span></div><div class="line"></div><div class="line">    <span class="comment"># Load configuration files for the default server block.</span></div><div class="line">    </div><div class="line">    include /etc/nginx/default.d/*.conf;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        root   /usr/share/nginx/html;</div><div class="line">        index  index.html index.htm index.php;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    error_page  404              /404.html;</div><div class="line">    location = /404.html &#123;</div><div class="line">        root   /usr/share/nginx/html;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment"># redirect server error pages to the static page /50x.html</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    error_page   500 502 503 504  /50x.html;</div><div class="line">    location = /50x.html &#123;</div><div class="line">        root   /usr/share/nginx/html;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    <span class="comment">#location ~ \.php$ &#123;</span></div><div class="line">    <span class="comment">#    proxy_pass   http://127.0.0.1;</span></div><div class="line">    <span class="comment">#&#125;</span></div><div class="line"></div><div class="line">    <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    <span class="comment">#location ~ \.php$ &#123;</span></div><div class="line">    <span class="comment">#    root           html;</span></div><div class="line">    <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></div><div class="line">    <span class="comment">#    fastcgi_index  index.php;</span></div><div class="line">    <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></div><div class="line">    <span class="comment">#    include        fastcgi_params;</span></div><div class="line">    <span class="comment">#&#125;</span></div><div class="line"></div><div class="line">    <span class="comment"># deny access to .htaccess files, if Apache's document root</span></div><div class="line">    <span class="comment"># concurs with nginx's one</span></div><div class="line">    <span class="comment">#</span></div><div class="line">    <span class="comment">#location ~ /\.ht &#123;</span></div><div class="line">    <span class="comment">#    deny  all;</span></div><div class="line">    <span class="comment">#&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>保存后通过<code>systemctl restart nginx</code>命令重启Nginx。然后在根目录下新建一个html文件并从浏览器访问它看看是不是正常显示。</p>
<h1 id="配置Nginx和PHP"><a href="#配置Nginx和PHP" class="headerlink" title="配置Nginx和PHP"></a>配置Nginx和PHP</h1><p>继续编辑<code>/etc/nginx/conf.d/default.conf</code>文件，将<code>location ~ \.php$</code>一段解注释，并改成如下样子：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">location ~ \.php$ &#123;</div><div class="line">    root   /usr/share/nginx/html;</div><div class="line">    fastcgi_pass   127.0.0.1:9000;</div><div class="line">    fastcgi_index  index.php;</div><div class="line">    fastcgi_param  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</div><div class="line">    include        fastcgi_params;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其中要注意<code>root</code>改成网页的根目录，此外还要确保<code>location /</code>的<code>index</code>中有<code>index.php</code>。然后通过<code>systemctl restart nginx</code>命令重启Nginx。</p>
<p>再编辑<code>/etc/php-php.d/www.conf</code>将<code>user</code>和<code>group</code>的值改为<code>nginx</code>（默认应该是<code>apache</code>）：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">user = nginx</div><div class="line">group = nginx</div></pre></td></tr></table></figure>
<p>保存后使用<code>systemctl restart php-fpm</code>命令重启PHP。</p>
<p>下面新建<code>/usr/share/nginx/html/index.php</code>文件测试PHP环境是否配置成功：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">	phpinfo();</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>从浏览器打开该页面，如果出现PHP信息则说明配置完成。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-kancolle-cookie" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2016/02/29/kancolle-cookie/" class="article-date">
  <time datetime="2016-02-29T14:22:22.000Z" itemprop="datePublished">2016-02-29</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ACG/">ACG</a>►<a class="article-category-link" href="/categories/ACG/艦隊これくしょん/">艦隊これくしょん</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/kcbanner.png" rel="gallery_civi1rlvw000qjzprgruppucd">
        <img src="/img/kcbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/29/kancolle-cookie/">舰娘更改Cookie直接连接</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2016/02/29/kancolle-cookie/" data-id="civi1rlvw000qjzprgruppucd" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2016/02/29/kancolle-cookie/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/游戏/">游戏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/舰队Collection/">舰队Collection</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>DMM的游戏限制境外玩家登录，因此玩游戏必须要<strong>让DMM认为你是从日本访问的</strong>，境外玩家使用日本的匿名代理是一种常见的手段。而DMM仅仅是在登陆的时候会验证访客的IP地址，因此多了所谓直连的这一种途径。另外，DMM并不会经常改变游戏Token，因此采用任何方法登陆后，都可以通过浏览器的开发者工具将Flash的链接提取出来并保存为书签便可直接登陆游戏。<div style="text-align:right"><strong><em>———— 萌娘百科</em></strong></div></p>
</blockquote>
<p><img src="/img/kcen.png" alt="地区错误"></p>
<p>之前玩舰娘不是使用ShadowSocks就是使用VPN，后来也曾一度使用改hosts搭配国内VPN的方式（因为只改hosts在有的网络环境下会出现白屏）。觉得这些方式都太繁琐并且过于依赖网络代理，后来就找到一种注入Cookie的方法。</p>
<p>直连方法是利用DMM在大部分时间都不检查用户IP这个特性，通过技术手段绕过IP验证的环节来达到直接连接的目的，更改浏览器或者舰娘辅助工具（比如Poi）的Cookie来使服务器不去验证用户的地域信息。</p>
<h1 id="清空Cookie"><a href="#清空Cookie" class="headerlink" title="清空Cookie"></a>清空Cookie</h1><p>首先打开<a href="http://www.dmm.com/" target="_blank" rel="external">DMM</a>主页并选择语言为<strong>日本语</strong>：</p>
<p><img src="/img/kcjp.png" alt="选择语言"></p>
<p>然后清一下Cookie：</p>
<p><img src="/img/kccookie.png" alt="删除Cookie"></p>
<h1 id="注入Cookie"><a href="#注入Cookie" class="headerlink" title="注入Cookie"></a>注入Cookie</h1><p>打开浏览器<strong>开发者工具</strong>中的<strong>控制台</strong>（在Poi中是<strong>显示</strong>菜单中的<strong>Webview开发者工具</strong>），将以下代码粘贴进去并回车：</p>
<pre><code>document.cookie = &quot;ckcy=1;expires=Sun, 09 Feb 2019 09:00:09 GMT;domain=osapi.dmm.com;path=/&quot;;
document.cookie = &quot;ckcy=1;expires=Sun, 09 Feb 2019 09:00:09 GMT;domain=203.104.209.7;path=/&quot;;
document.cookie = &quot;ckcy=1;expires=Sun, 09 Feb 2019 09:00:09 GMT;domain=www.dmm.com;path=/netgame/&quot;;
document.cookie = &quot;ckcy=1;expires=Sun, 09 Feb 2019 09:00:09 GMT;domain=log-netgame.dmm.com;path=/&quot;;
</code></pre><p><img src="/img/kccode.png" alt="运行代码"></p>
<p>如果出现</p>
<pre><code>&quot;ckcy=1;expires=Sun, 09 Feb 2019 09:00:09 GMT;domain=log-netgame.dmm.com;path=/&quot;
</code></pre><p>则说明注入成功。这时再次进入舰娘的页面<a href="http://www.dmm.com/netgame/social/-/gadgets/=/app_id=854854/" target="_blank" rel="external">-艦これ-</a>则会正常打开：</p>
<p><img src="/img/kchome.png" alt="舰娘主页"></p>
<p>登陆后就会顺利进入游戏了：</p>
<p><img src="/img/kcgame.png" alt="进入游戏"></p>
<p>楽しもっ！</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-minecraft" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2016/02/14/minecraft/" class="article-date">
  <time datetime="2016-02-14T13:11:11.000Z" itemprop="datePublished">2016-02-14</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ACG/">ACG</a>►<a class="article-category-link" href="/categories/ACG/Minecraft/">Minecraft</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/mcbanner.png" rel="gallery_civi1rlw70010jzpreoeyw8i1">
        <img src="/img/mcbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/14/minecraft/">Linux上搭建Minecraft服务器</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2016/02/14/minecraft/" data-id="civi1rlw70010jzpreoeyw8i1" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2016/02/14/minecraft/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Minecraft/">Minecraft</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/游戏/">游戏</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>之前想在树莓派上搭建一个Minecraft服务器，但是只限于局域网内玩有点不爽，所以才想在VPS上开服。这个服务器的地址是<strong>mc.shintaku.cc</strong>，欢迎大家过来乱搞。</p>
<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>Minecraft是基于Java运行的，所以首先要安装Java环境：</p>
<pre><code>yum install java
</code></pre><p>好像比其他平台的安装简单得多。然后为了让Minecraft在后台运行而不受终端操作的干扰，要装一个screen：</p>
<pre><code>yum install screen
</code></pre><h1 id="启动游戏"><a href="#启动游戏" class="headerlink" title="启动游戏"></a>启动游戏</h1><p>因为最开始要安装到树莓派上，硬件资源有限，所以这里介绍一个叫<a href="https://www.spigotmc.org/" target="_blank" rel="external">SpigotMC</a>的轻量级MC服务器端，是Bukkit的优化版，但是可能游戏中有些材质无法使用。由于某些原因论坛上不提供编译好的jar包下载，所以我找了一个1.7和1.8通用版本的放到服务器上：</p>
<pre><code>wget https://www.shintaku.cc/files/spigot.jar
</code></pre><p>新建一个目录将spigot.jar放进去，然后用以下命令启动：</p>
<pre><code>java -Xms256M -Xmx512M -jar spigot.jar nogui
</code></pre><p>后来发现<a href="https://minecraft.net/en/download/server" target="_blank" rel="external">微软官网</a>有了服务器版的下载，所以服务器配置足够好的话运行这个也是没有问题的，同样是先下载对应的版本：</p>
<pre><code>wget https://s3.amazonaws.com/Minecraft.Download/versions/1.8.9/minecraft_server.1.8.9.jar
</code></pre><p>地址里改成需要下载的版本号就可以了，启动命令相同：</p>
<pre><code>java -Xms256M -Xmx512M -jar minecraft_server.1.8.9.jar nogui
</code></pre><p>其中前两个参数是指定MC运行的内存范围，然后会出现一系列启动信息，最后就是<code>Stopping server</code>。    </p>
<h1 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h1><p>启动之后MC的目录下会生成一些其他的文件，先编辑<code>eula.txt</code>，将<code>eula</code>的值改为<code>true</code>：</p>
<pre><code>eula=true
</code></pre><p>然后编辑<code>server.properties</code>，开始里面应除了一些注释没有其他内容，将以下内容加进去：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="attr">generator-settings</span>=                 #用于设置超平坦世界的函数，留空即可</div><div class="line"><span class="attr">op-permission-level</span>=<span class="number">4</span>               #设置OP的许可权等级</div><div class="line"><span class="attr">allow-nether</span>=<span class="literal">true</span>                   #是否允许生成/进入下界</div><div class="line"><span class="attr">level-name</span>=world                    #世界名称及其文件夹名</div><div class="line"><span class="attr">enable-query</span>=<span class="literal">false</span>                  #允许使用GameSpy4协议的服务器监听器</div><div class="line"><span class="attr">allow-flight</span>=<span class="literal">false</span>                  #是否允许玩家在生存模式透过MOD飞行</div><div class="line"><span class="attr">announce-player-achievements</span>=<span class="literal">true</span>   #是否公开显示玩家成就</div><div class="line"><span class="attr">server-port</span>=<span class="number">25565</span>                   #服务器端口（默认为<span class="number">25565</span>）</div><div class="line"><span class="attr">level-type</span>=DEFAULT                  #世界类型</div><div class="line"><span class="attr">enable-rcon</span>=<span class="literal">false</span>                   #是否允许远程访问服务器仪表盘</div><div class="line"><span class="attr">level-seed</span>=                         #世界种子</div><div class="line"><span class="attr">force-gamemode</span>=<span class="literal">false</span>                #玩家是否总是以默认游戏模式进入服务器</div><div class="line"><span class="attr">server-ip</span>=                          #服务器IP，一般来说留空即可</div><div class="line"><span class="attr">max-build-height</span>=<span class="number">256</span>                #最高建筑高度（最高<span class="number">256</span>）</div><div class="line"><span class="attr">spawn-npcs</span>=<span class="literal">true</span>                     #是否生成村民NPC</div><div class="line"><span class="attr">white-list</span>=<span class="literal">false</span>                    #是否开启白名单认证</div><div class="line"><span class="attr">spawn-animals</span>=<span class="literal">true</span>                  #是否生成动物</div><div class="line"><span class="attr">hardcore</span>=<span class="literal">false</span>                      #是否开启极限模式</div><div class="line"><span class="attr">snooper-enabled</span>=<span class="literal">true</span>                #是否允许服务器定期发送统计数据</div><div class="line"><span class="attr">online-mode</span>=<span class="literal">false</span>                   #是否开启正版认证（开启后只有正版玩家可进入）</div><div class="line"><span class="attr">resource-pack</span>=                      #资源包URL（可让玩家选择是否使用服务器提供的资源包）</div><div class="line"><span class="attr">pvp</span>=<span class="literal">true</span>                            #可否PVP</div><div class="line"><span class="attr">difficulty</span>=<span class="number">1</span>                        #难度</div><div class="line"><span class="attr">enable-command-block</span>=<span class="literal">false</span>          #是否可以使用命令方块</div><div class="line"><span class="attr">gamemode</span>=<span class="number">0</span>                          #默认游戏模式</div><div class="line"><span class="attr">player-idle-timeout</span>=<span class="number">0</span>               #如果该玩家无反应超过这个分钟数将会被踢出</div><div class="line"><span class="attr">max-players</span>=<span class="number">20</span>                      #最大玩家数量</div><div class="line"><span class="attr">spawn-monsters</span>=<span class="literal">true</span>                 #是否生成怪物</div><div class="line"><span class="attr">generate-structures</span>=<span class="literal">true</span>            #是否生成建筑物</div><div class="line"><span class="attr">view-distance</span>=<span class="number">10</span>                    #客户端视野距离的上限</div><div class="line"><span class="attr">motd</span>=A Minecraft Server             #服务器在服务器列表页所显示的信息</div></pre></td></tr></table></figure>
<p>可以按照注释自己进行修改，注意如果没有购买正版需要将<code>online-mode</code>一项改为<code>false</code>。</p>
<p>一切完成后新开一个screen来启动MC：</p>
<pre><code>screen -S mc
</code></pre><p>这时相当于进入一个新终端，<code>mc</code>是这个screen的名字。在里面继续执行之前的java启动命令就可以正常启动游戏了。在screen中只要按下<code>Ctrl+A</code>再按下<code>Ctrl+D</code>就可以回到原来的终端了。再想进入这个screen的话运行<code>screen -r mc</code>就可以了。想要停止游戏的话输入<code>stop</code>就可以了。</p>
<p>然后在本地启动游戏，选多人游戏并输入服务器地址就能连接了。</p>
<p>另外附上基本的OP命令，就可以方便地管(zhuō)理(nòng)其他玩家了：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">/achievement &lt;give|take&gt; &lt;stat_name|*&gt; [player]</div><div class="line">/ban &lt;name&gt; [reason ...]</div><div class="line">/ban-ip &lt;address|name&gt; [reason ...]</div><div class="line">/banlist [ips|players]</div><div class="line">/blockdata &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;dataTag&gt;</div><div class="line">/clear [player] [item] [data] [maxCount] [dataTag]</div><div class="line">/clone &lt;x1&gt; &lt;y1&gt; &lt;z1&gt; &lt;x2&gt; &lt;y2&gt; &lt;z2&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; [maskMode] [cloneMode]</div><div class="line">/debug &lt;start|stop&gt;</div><div class="line">/defaultgamemode &lt;mode&gt;</div><div class="line">/deop &lt;player&gt;</div><div class="line">/difficulty &lt;new difficulty&gt;</div><div class="line">/effect &lt;player&gt; &lt;effect&gt; [seconds] [amplifier] [hideParticles] OR /effect &lt;player&gt; clear</div><div class="line">/enchant &lt;player&gt; &lt;enchantment ID&gt; [level]</div><div class="line">/entitydata &lt;entity&gt; &lt;dataTag&gt;</div><div class="line">/execute &lt;entity&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;command&gt; OR /execute &lt;entity&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; detect &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;block&gt; &lt;data&gt; &lt;command&gt;</div><div class="line">/fill &lt;x1&gt; &lt;y1&gt; &lt;z1&gt; &lt;x2&gt; &lt;y2&gt; &lt;z2&gt; &lt;TileName&gt; [dataValue] [oldBlockHandling] [dataTag]</div><div class="line">/gamemode &lt;mode&gt; [player]</div><div class="line">/gamerule &lt;rule name&gt; [value]</div><div class="line">/give &lt;player&gt; &lt;item&gt; [amount] [data] [dataTag]</div><div class="line">/help [page|command name]</div><div class="line">/kick &lt;player&gt; [reason ...]</div><div class="line">/kill [player|entity]</div><div class="line">/list</div><div class="line">/me &lt;action ...&gt;</div><div class="line">/op &lt;player&gt;</div><div class="line">/pardon &lt;name&gt;</div><div class="line">/pardon-ip &lt;address&gt;</div><div class="line">/particle &lt;name&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;xd&gt; &lt;yd&gt; &lt;zd&gt; &lt;speed&gt; [count] [mode]</div><div class="line">/playsound &lt;sound&gt; &lt;player&gt; [x] [y] [z] [volume] [pitch] [minimumVolume]</div><div class="line">/replaceitem &lt;entity|block&gt; ...</div><div class="line">/save-all</div><div class="line">/save-off</div><div class="line">/save-on</div><div class="line">/say &lt;message ...&gt;</div><div class="line">/scoreboard &lt;objectives|players|teams&gt; ...</div><div class="line">/seed</div><div class="line">/setblock &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;TileName&gt; [dataValue] [oldBlockHandling] [dataTag]</div><div class="line">/setidletimeout &lt;Minutes until kick&gt;</div><div class="line">/setworldspawn [&lt;x&gt; &lt;y&gt; &lt;z&gt;]</div><div class="line">/spawnpoint [player] [&lt;x&gt; &lt;y&gt; &lt;z&gt;]</div><div class="line">/spreadplayers &lt;x&gt; &lt;z&gt; &lt;spreadDistance&gt; &lt;maxRange&gt; &lt;respectTeams true|false&gt; &lt;player ...&gt;</div><div class="line">/stats &lt;entity|block&gt; ...</div><div class="line">/stop</div><div class="line">/summon &lt;EntityName&gt; [x] [y] [z] [dataTag]</div><div class="line">/tell &lt;player&gt; &lt;private message ...&gt;</div><div class="line">/tellraw &lt;player&gt; &lt;raw json message&gt;</div><div class="line">/testfor &lt;player&gt; [dataTag]</div><div class="line">/testforblock &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;TileName&gt; [dataValue] [dataTag]</div><div class="line">/testforblocks &lt;x1&gt; &lt;y1&gt; &lt;z1&gt; &lt;x2&gt; &lt;y2&gt; &lt;z2&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; [mode]</div><div class="line">/time &lt;set|add|query&gt; &lt;value&gt;</div><div class="line">/title &lt;player&gt; &lt;title|subtitle|clear|reset|times&gt; ...</div><div class="line">/toggledownfall</div><div class="line">/tp [target player] &lt;destination player&gt; OR /tp [target player] &lt;x&gt; &lt;y&gt; &lt;z&gt; [&lt;y-rot&gt; &lt;x-rot&gt;]</div><div class="line">/trigger &lt;objective&gt; &lt;add|set&gt; &lt;value&gt;</div><div class="line">/weather &lt;clear|rain|thunder&gt; [duration in seconds]</div><div class="line">/whitelist &lt;on|off|list|add|remove|reload&gt;</div><div class="line">/worldborder &lt;set|center|damage|warning|get|add&gt; ...</div><div class="line">/xp &lt;amount&gt; [player] OR /xp &lt;amount&gt;L [player]</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-softether" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2016/01/24/softether/" class="article-date">
  <time datetime="2016-01-24T15:33:33.000Z" itemprop="datePublished">2016-01-24</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>►<a class="article-category-link" href="/categories/网络/科学上网/">科学上网</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/vpnbanner.png" rel="gallery_civi1rlxy001rjzprhho9qzib">
        <img src="/img/vpnbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/softether/">SoftEther VPN的搭建与连接</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2016/01/24/softether/" data-id="civi1rlxy001rjzprhho9qzib" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2016/01/24/softether/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SoftEther/">SoftEther</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VPN/">VPN</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VPS/">VPS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代理/">代理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/科学上网/">科学上网</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>虚拟专用网（<strong>VPN</strong>），是一种常用于连接中、大型企业或团体与团体间的私人网络的通讯方法。虚拟私人网络的讯息透过公用的网络架构来传送内联网的网络讯息。它利用已加密的通道协议来达到保密、发送端认证、消息准确性等私人消息安全效果。这种技术可以用不安全的网络来发送可靠、安全的消息。可以用通俗的例子来解释这件事情：</p>
<blockquote>
<p>FFF国的小张和小王是<em>异地双性恋</em>，他们之间经常互通情书。但是FFF国有一个规定，就是异性青少年不能互通信件，否则就要被双双烧死。于是这对情侣就拜托他们的父亲老张和<del>隔壁</del>老王代为收发信件：小张和小王写完信后各自放在信封中封好，信封上分别写上<code>小王亲启</code>和<code>小张亲启</code>，然后分别交给他们的父亲，老张和老王把信封又装进一个大信封中，上面分别写上<code>老王收</code>和<code>老张收</code>再寄出。自然之后老张和老王会收到信件，拆开大信封后发现不是给自己的就转交给自己的孩子，这对情侣就这样达到了通信目的。</p>
</blockquote>
<p>看了VPN的原理，我们很容易想到可以用这种方式来科学上网。我们虽然不能直接和被墙的网站通讯，但我们可以通过VPN的方式躲过GFW的追杀。</p>
<p><a href="https://www.softether.org/" target="_blank" rel="external">SoftEther VPN</a>是由日本筑波大学的<a href="http://dnobori.cs.tsukuba.ac.jp/en/" target="_blank" rel="external">登 大遊</a>在硕士论文中提出的开源、跨平台、多重协议的虚拟专用网方案，是专门为穿过防火墙而设计的。我们可以用它在自己的VPS上搭建一个简单的VPN来使用。</p>
<h1 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h1><h2 id="下载解压"><a href="#下载解压" class="headerlink" title="下载解压"></a>下载解压</h2><p>首先要在服务器上下载并解压安装文件，一定注意是32位还是64位（可通过<code>uname -a</code>命令查看）。<br>32位系统：</p>
<pre><code>wget http://jp.softether-download.com/files/softether/v4.20-9608-rtm-2016.04.17-tree/Linux/SoftEther_VPN_Server/32bit_-_Intel_x86/softether-vpnserver-v4.20-9608-rtm-2016.04.17-linux-x86-32bit.tar.gz
</code></pre><p>64位系统：</p>
<pre><code>wget http://jp.softether-download.com/files/softether/v4.20-9608-rtm-2016.04.17-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.20-9608-rtm-2016.04.17-linux-x64-64bit.tar.gz
</code></pre><p>以上为截止发布本文时的最新版本，建议从<a href="http://www.softether-download.com/en.aspx?product=softether" target="_blank" rel="external">SoftEther官方网站</a>获取最新版本。</p>
<h2 id="安装启动"><a href="#安装启动" class="headerlink" title="安装启动"></a>安装启动</h2><p>先解压（建议装到<code>/usr/local</code>下）：</p>
<pre><code>tar -zxvf softether-vpnserver-*.tar.gz
</code></pre><p><code>cd vpnserver</code>进入到解压目录下并启动安装脚本<code>./.install.sh</code>：</p>
<pre><code>--------------------------------------------------------------------

SoftEther VPN Server (Ver 4.20, Build 9608, Intel x64 / AMD64) for Linux Install Utility
Copyright (c) SoftEther Project at University of Tsukuba, Japan. All Rights Reserved.

--------------------------------------------------------------------


Do you want to read the License Agreement for this software ?

 1. Yes
 2. No

Please choose one of above number:
</code></pre><p>认识不认识字至少读一读，之后会出现一堆License，然后问你看懂了没：</p>
<pre><code>Did you read and understand the License Agreement ?
(If you couldn&apos;t read above text, Please read &apos;ReadMeFirst_License.txt&apos; file with any text editor.)

 1. Yes
 2. No

Please choose one of above number:
</code></pre><p>当然没看懂也要说看懂了，然后又问你同不同意：</p>
<pre><code>Did you agree the License Agreement ?

1. Agree
2. Do Not Agree

Please choose one of above number:
</code></pre><p>不同意就不要用了。如果提示不识别某些命令比如<code>gcc</code>，另行安装即可。如果没有异常则说明安装成功，执行<code>./vpnserver start</code>启动服务。同理<code>./vpnserver stop</code>停止服务。</p>
<p>在CentOS7以后可以用systemd启动vpnserver，先新建启动脚本<code>/etc/systemd/system/vpnserver.service</code>：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="section">[Unit]</span></div><div class="line"><span class="attr">Description</span>=SoftEther VPN Server</div><div class="line"><span class="attr">After</span>=network.target</div><div class="line"><span class="section"></span></div><div class="line">[Service]</div><div class="line"><span class="attr">Type</span>=forking</div><div class="line"><span class="attr">ExecStart</span>=/usr/local/vpnserver/vpnserver start</div><div class="line"><span class="attr">ExecStop</span>=/usr/local/vpnserver/vpnserver stop</div><div class="line"><span class="section"></span></div><div class="line">[Install]</div><div class="line"><span class="attr">WantedBy</span>=multi-user.target</div></pre></td></tr></table></figure>
<p>然后就可以通过<code>systemctl start vpnserver</code>启动了，并通过<code>systemctl enable vpnserver</code>设置开机自启。</p>
<h2 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h2><p>启动成功后我们需要设置远程登录密码以便本地管理服务。运行<code>./vpncmd</code>进入VPN的命令行：</p>
<pre><code>vpncmd command - SoftEther VPN Command Line Management Utility
SoftEther VPN Command Line Management Utility (vpncmd command)
Version 4.20 Build 9608   (English)
Compiled 2016/04/17 21:59:35 by yagi at pc30
Copyright (c) SoftEther VPN Project. All Rights Reserved.

By using vpncmd program, the following can be achieved.

1. Management of VPN Server or VPN Bridge
2. Management of VPN Client
3. Use of VPN Tools (certificate creation and Network Traffic Speed Test Tool)

Select 1, 2 or 3:
</code></pre><p>这里我们选择1，然后出现：</p>
<pre><code>Specify the host name or IP address of the computer that the destination VPN Server or VPN Bridge is operating on.
By specifying according to the format &apos;host name:port number&apos;, you can also specify the port number.
(When the port number is unspecified, 443 is used.)
If nothing is input and the Enter key is pressed, the connection will be made to the port number 8888 of localhost (this computer).
Hostname of IP Address of Destination:
</code></pre><p>这里需要选择地址和端口。由于这台VPS我搭了一个网站，用了SSL占用了443端口，所以默认的443端口是用不了了，所以一定要改。我改用了5555端口，所以在这里输入<code>localhost:5555</code>，然后出现：</p>
<pre><code>If connecting to the server by Virtual Hub Admin Mode, please input the Virtual Hub name.
If connecting by server admin mode, please press Enter without inputting anything.
Specify Virtual Hub Name:
</code></pre><p>这里就是指定一个虚拟HUB名字，用默认的直接回车就行。</p>
<pre><code>Connection has been established with VPN Server &quot;localhost&quot; (port 5555).

You have administrator privileges for the entire VPN Server.

VPN Server&gt;
</code></pre><p>这时我们需要输入<code>ServerPasswordSet</code>命令设置远程管理密码，确认密码后就可以通过Windows版的<code>SoftEther VPN Server Manager</code>远程管理了。</p>
<h1 id="VPN管理"><a href="#VPN管理" class="headerlink" title="VPN管理"></a>VPN管理</h1><p>首先下载并安装<a href="http://softether-download.com/en.aspx" target="_blank" rel="external">SoftEther VPN Server Manager</a>（居然最近移植了Mac版），其实只用到了管理工具：</p>
<p><img src="/img/vpnsetup.png" alt="Setup Wizard"></p>
<p>安装之后运行它：</p>
<p><img src="/img/vpnnew.png" alt="Server Manager"></p>
<p>在这里点<code>新建</code>：</p>
<p><img src="/img/vpnset.png" alt="New Connection Setting"></p>
<p><code>Host Name</code>填服务器的地址或域名，端口如果之前改过了在这也记得改过来，右下角的密码填之前设置过的密码。新建完成后<code>Connect</code>就会弹出<code>Easy Setup</code>窗口（如果提示连不上请检查一下服务器的防火墙设置）：</p>
<p><img src="/img/vpneasy.png" alt="Easy Setup"></p>
<p>这里在第一个<code>远程连接</code>挑钩然后下一步即可，虚拟HUB名像之前一样默认就好。</p>
<p>然后会弹出一个<code>动态DNS功能</code>的窗口，由于不能确定它给的域名是不是被墙了，我们就不去用它，把这个窗口关了就行了。</p>
<p>之后会有一个协议设置的窗口：</p>
<p><img src="/img/vpnl2tp.png" alt="IPsec/L2TP/EtherIP/L2TPv3 Server Settings"></p>
<p>这里把<code>启用L2TP</code>挑上钩，下面设置一个<code>IPsec预共享密钥</code>就行了。</p>
<p>之后又会弹出一个<code>VPN Azure Cloud</code>服务的窗口，感觉没什么用，禁用了就行了。即使有用以后也可以再启用。</p>
<p>接下来要新建用户：</p>
<p><img src="/img/vpnuser.png" alt="Create New User"></p>
<p>其中用户名是必填的，验证类型选密码验证就行，然后在右侧设置用户密码。</p>
<p><img src="/img/vpnmanager.png" alt="Server Manager"></p>
<p>之后回到管理界面，点<code>管理虚拟HUB</code>：</p>
<p><img src="/img/vpnhub.png" alt="Virtual Hub"></p>
<p>这里也可以继续添加新用户。点<code>虚拟NAT和虚拟DHCP服务器</code>，弹出窗口：</p>
<p><img src="/img/vpnvirtual.png" alt="Virtual NAT &amp; Virtual DHCP"></p>
<p>在里面<code>启用SecureNAT</code>并点<code>SecureNAT配置</code>：</p>
<p><img src="/img/vpnnat.png" alt="SecureNAT Configration"></p>
<p>注意DNS要改为<code>8.8.8.8</code>和<code>8.8.4.4</code>。这里就算配置完毕。然后顺便生成一下<strong>OpenVPN</strong>的配置文件，点<code>OpenVPN / MS-SSTP Setting</code>：</p>
<p><img src="/img/vpnopen.png" alt="Server Manager"></p>
<p>然后点击新窗口中部的按钮生成配置文件：</p>
<p><img src="/img/vpnovpn.png" alt="OpenVPN / MS-SSTP Setting"></p>
<p>打开导出的压缩包会看到里面有两个<code>.ovpn</code>文件，一般我们要用到<code>*_openvpn_remote_access_l3.ovpn</code>这个文件，因为我们是通过IPv4地址管理的VPN，所以这个配置文件里的<code>remote</code>一项会是IPv4地址，如果需要使用IPv6的VPN就将其替换为相应的IPv6地址即可。</p>
<h1 id="本地连接"><a href="#本地连接" class="headerlink" title="本地连接"></a>本地连接</h1><h2 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a>IPv4</h2><p>这里只说电脑设备，移动的设备的话配置方法类似。</p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>首先到<code>网络和共享中心</code>里新建一个网络连接：</p>
<p><img src="/img/vpnwin1.png" alt="Set Up a Connection or Network"></p>
<p>选择<code>连接到工作区</code>    。</p>
<p><img src="/img/vpnwin2.png" alt="Connect to a Workplace"></p>
<p>这里当然要选VPN咯。</p>
<p><img src="/img/vpnwin3.png" alt="Connect to a Workplace"></p>
<p>然后在地址栏里填上服务器地址或域名。配置完成后打开<code>更改适配器设置</code>：</p>
<p><img src="/img/vpnwin4.png" alt="Network Connections"></p>
<p>打开VPN连接的属性：</p>
<p><img src="/img/vpnwin5.png" alt="Properties"></p>
<p>在<code>安全</code>选项卡里将<code>VPN类型</code>改为<code>L2TP</code>，然后点高级设置：</p>
<p><img src="/img/vpnwin6.png" alt="Advanced Properties"></p>
<p>在里面选上使用预共享密钥并把之前设置的密钥填进去。</p>
<p><img src="/img/vpnwin7.png" alt="Sign in"></p>
<p>之后在VPN连接里把用户名和密码填进去就可以连上了。</p>
<h3 id="Mac-OS-X"><a href="#Mac-OS-X" class="headerlink" title="Mac OS X"></a>Mac OS X</h3><p>在网络配置里新建网络连接：</p>
<p><img src="/img/vpnmac1.png" alt="Network Preferences"></p>
<p>接口选<code>VPN</code>，VPN类型选<code>L2TP over IPSec</code>，创建即可。</p>
<p><img src="/img/vpnmac2.png" alt="Network Preferences"></p>
<p>然后在地址栏填服务器地址或域名，下面的账户名称填之前新建的用户名，然后点下面的<code>认证设置</code>：</p>
<p><img src="/img/vpnmac3.png" alt="Network Preferences"></p>
<p>密码中填上面用户的密码，共享密钥填之前设置的预共享密钥，保存并连接即可。</p>
<h2 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h2><p>因为有使用教育网通过IPv6的需求，这里也说一下IPv6的连接方法。</p>
<h3 id="移动设备"><a href="#移动设备" class="headerlink" title="移动设备"></a>移动设备</h3><p>iOS的应用商店里有OpenVPN的客户端，但由于软件的特殊性，中国应用商店里已经下架了，所以通过什么渠道安装请自己想办法。</p>
<p>如果你的Android设备支持IPv6网络的话，Play Store里也有OpenVPN的客户端下载，也可以搜一个apk自己装。</p>
<p><img src="/img/vpnopenvpn.png" alt="OpenVPN"></p>
<p>上述设备安装好客户端以后，将之前生成的<code>.ovpn</code>文件传到设备中，用OpenVPN打开即可，之后还会需要输入之前设置的用户名密码之类的，这里不再赘述。</p>
<h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><p>因为没有找到Mac上的OpenVPN客户端，所以使用了一个叫做<strong>Tunnelblick</strong>的App，功能类似。</p>
<p><img src="/img/vpntunnel.png" alt="Tunnelblick"></p>
<p>到<a href="https://tunnelblick.net/downloads.html" target="_blank" rel="external">Tunnelblick官网</a>下载后，同样将<code>.ovpn</code>文件用它打开就可以了，输入用户名密码后就连上了。</p>
<h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><p>从理论上讲IPv6的VPN用Windows自带的VPN连接就可以（同IPv4），把地址变一下就可以了。如果遇到不能连接的情况也可以试一下OpenVPN的Windows版，去<a href="https://openvpn.net/index.php/open-source/downloads.html" target="_blank" rel="external">OpenVPN官网</a>下载即可。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-ssl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2015/12/30/ssl/" class="article-date">
  <time datetime="2015-12-30T15:33:33.000Z" itemprop="datePublished">2015-12-30</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>►<a class="article-category-link" href="/categories/网络/网站部署/">网站部署</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/sslbanner.png" rel="gallery_civi1rlxv001njzpre22hiosd">
        <img src="/img/sslbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/30/ssl/">SSL证书的申请与配置</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2015/12/30/ssl/" data-id="civi1rlxv001njzpre22hiosd" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2015/12/30/ssl/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSL/">SSL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VPS/">VPS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>超文本传输安全协议（HTTPS）是一种网络安全传输协议。在计算机网络上，HTTPS经由超文本传输协议进行通讯，但利用SSL/TLS来对数据包进行加密。HTTPS开发的主要目的，是提供对网络服务器的身份认证，保护交换数据的隐私与完整性。</p>
<p>如今越来越多的个人网站使用HTTPS协议，所以感觉自己的网站不装这么一个逼就落伍了。看着自己的主页地址栏前面有一个绿色的<code>https</code>也感觉安全了许多<del>虽然并没有什么卵用</del>。</p>
<h1 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h1><p>要使用HTTPS协议首先要有一个值得信任的证书颁发机构给你的网站颁发的证书。目前免费的SSL证书颁发机构有很多，本文以从<strong>沃通</strong>上申请证书为例。</p>
<h2 id="填写信息"><a href="#填写信息" class="headerlink" title="填写信息"></a>填写信息</h2><p>首先到<a href="https://buy.wosign.com/free/" target="_blank" rel="external">沃通官网</a>注册账号并登录。</p>
<p>然后会出现以下界面：</p>
<p><img src="/img/ssl1.png" alt="填写信息"></p>
<p>单次申请支持1个证书5个域名2年期限，证书可选中英文，提交就好了。</p>
<h2 id="验证域名"><a href="#验证域名" class="headerlink" title="验证域名"></a>验证域名</h2><p>签发机构需要验证域名的所有者，可以通过域名邮箱验证，也可以将指定信息放到网站上让其扫描以验证：</p>
<p><img src="/img/ssl2.png" alt="验证域名"></p>
<p>如果没有域名邮箱，将指定的html文件下载下来上传到服务器上网站的根目录下然后点下面的验证就可以了。</p>
<h2 id="生成签名"><a href="#生成签名" class="headerlink" title="生成签名"></a>生成签名</h2><p>到订单里选择签名生成方式，可以选择第一种方式系统自动生成，设置密码：</p>
<p><img src="/img/ssl3.png" alt="生成签名"></p>
<p>这个密码是最后解压证书用的，所以要记好。</p>
<h2 id="下载证书"><a href="#下载证书" class="headerlink" title="下载证书"></a>下载证书</h2><p>之后会弹出证书的下载链接，如果没有可以稍等片刻去订单里Get Cert，或者等待邮箱收到链接，输入刚才设置的密码就可下载压缩包了：</p>
<p><img src="/img/ssl4.png" alt="下载证书"></p>
<h1 id="部署证书"><a href="#部署证书" class="headerlink" title="部署证书"></a>部署证书</h1><p>通过之前设置的密码解压压缩包，里面有各种服务器的证书，解压自己所用的服务器对应的证书即可。本文以<code>Nginx</code>服务器为例。</p>
<h2 id="上传证书"><a href="#上传证书" class="headerlink" title="上传证书"></a>上传证书</h2><p>解压后里面有一个<code>.crt</code>文件和一个<code>.key</code>文件，将它们上传到服务器上：</p>
<pre><code>scp 1_your_domain_bundle.crt remote_username@remote_host:/usr/share/nginx/
scp 2_your_domain.key remote_username@remote_host:/usr/share/nginx/
</code></pre><h2 id="监听端口"><a href="#监听端口" class="headerlink" title="监听端口"></a>监听端口</h2><p>一般HTTPS使用443端口，因此要编辑<code>/etc/nginx/conf.d</code>下的<code>ssl.conf</code>文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       443;</div><div class="line">    server_name  your_domain;</div><div class="line"></div><div class="line">    ssl                  on;</div><div class="line">    ssl_certificate      /usr/share/nginx/1_your_domain_bundle.crt;</div><div class="line">    ssl_certificate_key  /usr/share/nginx/2_your_domain.key;</div><div class="line"></div><div class="line">    ssl_session_timeout  5m;</div><div class="line"></div><div class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</div><div class="line">    ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</div><div class="line">    ssl_prefer_server_ciphers   on;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        root   /usr/share/nginx/www;</div><div class="line">        index  index.html index.htm;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>解开注释并将证书文件路径写进去保存，然后运行<code>nginx -s reload</code>重新加载配置文件即可。</p>
<h2 id="强制跳转"><a href="#强制跳转" class="headerlink" title="强制跳转"></a>强制跳转</h2><p>经过之前的配置必须在地址里写上<code>https</code>才会跳转到HTTPS域名，不然还是会跳转到HTTP的。</p>
<p>所以还要编辑<code>/etc/nginx/conf.d</code>下的<code>default.conf</code>文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       80 default_server;</div><div class="line">    server_name  your_domain;</div><div class="line">    <span class="built_in">return</span> 301 https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;        </div><div class="line"></div><div class="line">    include /etc/nginx/default.d/*.conf;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        root   /usr/share/nginx/www;</div><div class="line">        index  index.html index.htm;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在<code>server_name</code>下面加一个301跳转就能强制跳转到<code>https</code>了。</p>
<p>保存后运行<code>nginx -s reload</code>重新加载配置文件就搞定了。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-dd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2015/12/21/dd/" class="article-date">
  <time datetime="2015-12-21T13:11:11.000Z" itemprop="datePublished">2015-12-21</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/奇技淫巧/">奇技淫巧</a>►<a class="article-category-link" href="/categories/奇技淫巧/＊nix/">＊nix</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/ddbanner.png" rel="gallery_civi1rluz000ajzpr8alqbvtg">
        <img src="/img/ddbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/dd/">使用dd命令制作启动盘</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2015/12/21/dd/" data-id="civi1rluz000ajzpr8alqbvtg" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2015/12/21/dd/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unix/">Unix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>双十二期间因为有十几块钱的代金券用不出去剁手了一个<strong>树莓派2代</strong><del>为了二两醋买一斤螃蟹</del>。货到了以后就要往micro SD卡里装一个系统。之前用Windows的时候一直用软碟通往U盘之类的介质中写入镜像文件，换了rMBP之后还没干过这类事，所以一时摸不着头脑。后来发现有<code>dd</code>这样一个命令可以用来制作启动盘。</p>
<p>在Unix上，硬件的设备驱动器和特殊设备文件就像普通文件一样，出现在文件系统中；只要在各自的驱动程序中实现了对应的功能，dd也可以读取或写入到这些文件。这样，dd也可以用在备份硬件的引导扇区、获取一定数量的随机数据等任务中。dd程序也可以在复制时处理数据，例如转换字节序、或在ASCII与EBCDIC编码间互换。</p>
<h1 id="查询驱动器名"><a href="#查询驱动器名" class="headerlink" title="查询驱动器名"></a>查询驱动器名</h1><p>插入U盘或读卡器后首先需要知道其在当前系统下的驱动器名，可以使用<code>diskutil list</code>命令：</p>
<pre><code>/dev/disk0 (internal, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *251.0 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:          Apple_CoreStorage Macintosh HD            250.1 GB   disk0s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3
/dev/disk1 (internal, virtual):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:                  Apple_HFS Macintosh HD           +249.8 GB   disk1
                             Logical Volume on disk0s2
                             6507AD0A-D7FF-4641-AC5C-012CCD75AA23
                             Unlocked Encrypted
/dev/disk2 (external, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:     FDisk_partition_scheme                        *4.0 GB     disk2
   1:                 DOS_FAT_32 UNTITLED                4.0 GB     disk2s1
</code></pre><p>可以看到<code>disk0</code>当然是电脑的内置物理磁盘，<code>disk1</code>是内置虚拟磁盘，<code>disk2</code>才是要写入的U盘。然后通过<code>diskutil unmountDisk /dev/disk2</code>命令卸载刚才插入的驱动器，出现：</p>
<pre><code>Unmount of all volumes on disk2 was successful
</code></pre><p>说明卸载成功。</p>
<h1 id="写入镜像文件"><a href="#写入镜像文件" class="headerlink" title="写入镜像文件"></a>写入镜像文件</h1><p>使用命令：</p>
<pre><code>sudo dd if=disk_image_file of=/dev/rdisk2 bs=1m
</code></pre><p>注意使用<code>sudo</code>，中间<code>of</code>参数中的盘符中记得改成<code>rdisk</code>（据我测试这里如果没加<code>r</code>写入过程会非常缓慢）。还有<code>bs</code>参数代表的是块大小<del>学过体系结构的都知道</del>，单位可以使用b、k、m、g等，默认是512字节，但不知道在这里不同大小会影响什么。</p>
<p>写入成功后会返回一个报告：</p>
<pre><code>501+1 records in
501+1 records out
526260224 bytes transferred in 82.961110 secs (6343457 bytes/sec)
</code></pre><p>这里看到写入到一个2.0的U盘速度大概6兆/秒，如果上面<code>of</code>中没加<code>r</code>的话速度则不到1兆/秒：</p>
<pre><code>526260224 bytes transferred in 552.306611 secs (952841 bytes/sec)
</code></pre><p>到这里写入完成，使用<code>diskutil eject /dev/disk2</code>弹出驱动器即可，出现：</p>
<pre><code>Disk /dev/disk2 ejected
</code></pre><p>说明弹出成功，全部完成。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-6relayd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2015/12/15/6relayd/" class="article-date">
  <time datetime="2015-12-15T07:15:15.000Z" itemprop="datePublished">2015-12-15</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>►<a class="article-category-link" href="/categories/网络/科学上网/">科学上网</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/6rbanner.png" rel="gallery_civi1rlub0001jzprvv7izfvj">
        <img src="/img/6rbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/6relayd/">OpenWrt路由器的IPv6代理</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2015/12/15/6relayd/" data-id="civi1rlub0001jzprvv7izfvj" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2015/12/15/6relayd/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenWrt/">OpenWrt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ShadowSocks/">ShadowSocks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/科学上网/">科学上网</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/路由器/">路由器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>之前本来是想用路由器获取IPv6地址并使用双栈连接的代理服务器访问互联网。虽然之前网件自己的固件是有<strong>穿透模式</strong>并可以获取v6地址，但是无法安装ShadowSocks，所以才刷成了OpenWrt。但是这个固件默认是没有<strong>穿透模式</strong>的，所以需要自己配一发。</p>
<p>现在我们需要用到以下软件：</p>
<ul>
<li>shadowsocks-libev-spec</li>
<li>luci-app-shadowsocks-spec</li>
<li>6relayd</li>
</ul>
<h1 id="安装ShadowSocks"><a href="#安装ShadowSocks" class="headerlink" title="安装ShadowSocks"></a>安装ShadowSocks</h1><p>在OpenWrt上我们可以安装<code>shdowsocks-libev</code>版本，顺便搭配LuCI界面的<code>luci-app</code>使用，这个项目在<a href="https://sourceforge.net/projects/openwrt-dist/files/shadowsocks-libev/" target="_blank" rel="external">sourceforge</a>有发布，可以从这里下载最新的。如果被墙了也可以从我备份在服务器上的较老版本（注意软件所适配的架构是ar71xx）：</p>
<pre><code>wget https://www.shintaku.cc/files/shadowsocks-libev-spec_2.4.6-1_ar71xx.ipk
wget https://www.shintaku.cc/files/luci-app-shadowsocks-spec_1.4.0-1_all.ipk
</code></pre><p>下载完成后使用<code>opkg</code>命令安装：</p>
<pre><code>opkg install shadowsocks-libev-spec_2.4.6-1_ar71xx.ipk
opkg install luci-app-shadowsocks-spec_1.4.0-1_all.ipk
</code></pre><p>安装完成后<code>reboot</code>命令重启路由器，再次进入LuCI界面可以看到多了一个<code>Services</code>-<code>ShadowSocks</code>：</p>
<p><img src="/img/opss.png" alt="ShadowSocks"></p>
<p>就说明安装正确，在里面输入ShadowSocks服务器信息就可以自动代理了，凡是连上这台路由器的设备获取到的都是代理后的网络了。</p>
<h1 id="安装6relayd"><a href="#安装6relayd" class="headerlink" title="安装6relayd"></a>安装6relayd</h1><p>由于现在即使通过代理上网也是消耗校内流量的，为了不走流量，我们只能借助IPv6网络。但是普通的路由器很少可以正常获取IPv6地址，即使路由器能获取到连接设备也很难获取，除了NETGEAR的部分路由器（包括WNR2200）的新版固件是有IPv6连接的，并且本人亲测使用<code>穿透模式</code>可以正常使用IPv6网络。所以我希望在OpenWrt上也能使用<code>穿透模式</code>，再通过ShadowSocks代理IPv6网络就可以免流量访问外网了。</p>
<p>要使用<code>穿透模式</code>就少不了<a href="https://wiki.openwrt.org/doc/uci/6relayd" target="_blank" rel="external">6relayd</a>这个软件。可是官方源如今没提供这个包，于是可以获取我的备份并安装：</p>
<pre><code>wget https://www.shintaku.cc/files/6relayd_2013-10-21_ar71xx.ipk
opkg install 6relayd_2013-10-21_ar71xx.ipk
</code></pre><p>安装完成之后编辑<code>/etc/config/6relayd</code>文件在默认配置后面加一组：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">config relay</div><div class="line">	option master   <span class="string">'wan'</span></div><div class="line">	option network  <span class="string">'lan'</span></div><div class="line">	option rd       <span class="string">'relay'</span></div><div class="line">	option dhcpv6   <span class="string">'relay'</span></div><div class="line">	option ndp      <span class="string">'relay'</span></div></pre></td></tr></table></figure>
<p>保存后使用下面的命令开启服务并设置为开机启动即可：</p>
<pre><code>/etc/init.d/6relayd start
/etc/init.d/6relayd enable
</code></pre><h1 id="配置路由器"><a href="#配置路由器" class="headerlink" title="配置路由器"></a>配置路由器</h1><p>现在要到LuCI界面下找到<code>Network</code>-<code>Interfaces</code>并添加一个新的接口：</p>
<p><img src="/img/opnew.png" alt="Add new interface"></p>
<p>接口名叫<code>wan6</code>，协议选择<code>DHCPv6 client</code>，接口自定义为<code>@wan</code>：</p>
<p><img src="/img/opwan6.png" alt="wan6"></p>
<p>保存应用后重启路由器，就会发现多了一个WAN6接口，并且WAN口获取到IPv6地址了：</p>
<p><img src="/img/opipv6.png" alt="IPv6地址"></p>
<p>这时回到ShadowSocks的配置界面，将服务器地址改为VPS的IPv6地址就可以了：</p>
<p><img src="/img/opsss.png" alt="ShadowSocks设置"></p>
<p>记得要开全局代理，因为毕竟PPPoE拨着号呢，<del>在校园网11月30日改革后有线网拨号后不用登录就能上网让我很慌啊，路由器一直连着网终归是有偷跑流量的风险，所以打开IPv6全局代理最为保险，使得能通过代理的IPv6网络可以使用而IPv4网络因为通不过代理无法使用。</del>2016年春季学期开学后发现即使拨号路由器也无法获取IPv6地址了。</p>
<p>于是现在得到的效果就是任何连接到这台路由器的设备无需任何登录即可<strong>访问外网</strong>，而且<strong>不消耗校内网流量</strong>，网络还<strong>自带科学上网Buff</strong>，从此妈妈再也不用担心我流量不够用了。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-openwrt" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2015/12/12/openwrt/" class="article-date">
  <time datetime="2015-12-12T04:12:12.000Z" itemprop="datePublished">2015-12-12</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>►<a class="article-category-link" href="/categories/网络/科学上网/">科学上网</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="https://wiki.openwrt.org/lib/tpl/openwrt/images/logo.png" rel="gallery_civi1rlwi0018jzprnulwxhcx">
        <img src="https://wiki.openwrt.org/lib/tpl/openwrt/images/logo.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/12/openwrt/">路由器刷入OpenWrt固件</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2015/12/12/openwrt/" data-id="civi1rlwi0018jzprnulwxhcx" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2015/12/12/openwrt/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenWrt/">OpenWrt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/路由器/">路由器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>暑假剁手了一台rMBP但没有以太网接口，为了省钱就需要一个无线路由器，之前曾了解到路由器可以刷<strong>OpenWrt</strong>后装上<strong>ShadowSocks</strong>实现自动科学上网，于是就在集训的时候从马云家买了一个二手的<a href="http://www.tp-link.com.cn/product_225.html" target="_blank" rel="external">TP-Link TL-WR703N</a>刷上OpenWrt在机房给笔记本供网。</p>
<p><img src="/img/op703n.png" alt="TL-WR703N"></p>
<p>由于这货只有一个网口，当路由器自动获取IP地址后，就进不去<a href="192.168.1.1">192.168.1.1</a>的管理界面了，虽然能上网，但每次换网线接头的时候都要捅菊花抹掉原来的设置。因此只有使用静态IP时才能正常使用这种路由器。这学期开学后发现家里有一个<a href="http://www.netgear.com/home/products/networking/wifi-routers/wnr2200.aspx" target="_blank" rel="external">Netgear WNR2200</a>在吃灰，于是就把它拿到学校刷上了OpenWrt放宿舍给各种无线设备供网。</p>
<p><img src="/img/op2200.png" alt="WNR2200"></p>
<h1 id="刷入固件"><a href="#刷入固件" class="headerlink" title="刷入固件"></a>刷入固件</h1><p><strong>OpenWrt</strong>是一个适合于嵌入式设备的Linux发行版。它提供了一个可添加软件包的可写的文件系统，使用者可以自由的选择应用程序和配置，并且可以使用一些适合某方面的应用的软件包来定制设备。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p>首先你要拥有一台可以刷入OpenWrt的路由器，至于OpenWrt支持那些设备，请到<a href="https://wiki.openwrt.org/toh/start" target="_blank" rel="external">Supported Devices</a>页面查看。本文以WNR2200为例。</p>
<h3 id="固件"><a href="#固件" class="headerlink" title="固件"></a>固件</h3><p>前往<a href="https://downloads.openwrt.org/latest/" target="_blank" rel="external">Download</a>下载最新的对应设备的固件。注意固件列表里一半会有两种后缀：<code>squashfs-factory.img</code>和<code>squashfs-sysupgrade.img</code>，如果是从原厂固件刷到OpenWrt请用前者，如果是从OpenWrt升级请用后者。还有一种可能文件名以<code>NA</code>结尾<del>，可能是代表<code>North America</code></del>，基本上与不带<code>NA</code>的没什么区别。</p>
<h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>还需要一台有以太网接口的电脑和一根网线，电脑操作系统不限，但是<em>Windows</em>需要提前开启<code>TFTP</code>（因为这个功能系统默认是关闭的），具体操作就是进入<code>控制面板</code>-<code>程序</code>-<code>程序和功能</code>，</p>
<p><img src="/img/optftp.png" alt="开启TFTP"></p>
<p>打开<code>打开或关闭Windows功能</code>窗口，在里面把<code>TFTP</code>挑上钩，之后就可以开始了。</p>
<h2 id="刷入固件-1"><a href="#刷入固件-1" class="headerlink" title="刷入固件"></a>刷入固件</h2><p><strong>刷机有风险，操作需谨慎！</strong><br><strong>刷机有风险，操作需谨慎！</strong><br><strong>刷机有风险，操作需谨慎！</strong><br><del>重要的事说三遍</del></p>
<p>首先要将路由器与电脑用网线相连（在后面的设置中网线是必要的），然后进入到路由器管理界面。</p>
<p>有的原厂固件是可以直接升级成OpenWrt的，因此首先进入路由器管理界面，找到固件升级的选项，选择下好的OpenWrt固件上传就可以了，我之前刷TL-WR703N时是可以直接上传的，上传完成重启后就算是刷完了。但我后来刷WNR2200时遇到了不认固件的情况（可能是因为原厂固件的版本问题），于是只好用<strong>TFTP</strong>的方式上传固件，这就是之前为什么要打开Windows中<code>TFTP</code>功能的原因。</p>
<p>如果从原厂管理界面中直接上传固件成功，请直接进入下一节；若不认固件，请执行以下步骤：</p>
<ul>
<li><p>关闭路由器电源，用笔尖捅住“Restore Factory Settings”<del>菊花</del>键不放。</p>
</li>
<li><p>打开路由器电源，这时电源黄灯开始闪烁，这时依然<strong>不要松开</strong>RESET键，直到电源灯变为绿色长亮（或闪烁？）才可松手（可能有的路由器的表现不一样，达到类似效果即可），这时路由器已经进入了tftp模式。</p>
</li>
<li><p>将电脑的IP设为<code>192.168.1.2</code>，子网掩码设为<code>255.255.255.0</code>，将电脑与路由器的<strong>1号LAN口</strong>用网线相连。</p>
</li>
<li><p>从终端进入到要刷的固件所在目录中，假设固件名叫<code>openwrt.img</code>，如果在<em>Windows</em>下则使用命令：</p>
<pre><code>tftp -i 192.168.1.1 PUT &quot;openwrt.img&quot;
</code></pre><p>如果在<em>OS X</em>或<em>Linux</em>下则在终端里键入<code>tftp</code>，之后使用以下命令：</p>
<pre><code>connect 192.168.1.1
binary
rexmt 1
timeout 60
put &quot;openwrt.img&quot;
</code></pre><p>稍等片刻，路由器的灯会出现各种变化，直到电源灯又恢复长绿状态（不同路由器或许不同），说明上传完成了。</p>
</li>
<li><p>重启路由器，不出意外之后应该可以通过网页访问<a href="192.168.1.1">192.168.1.1</a>的<code>LuCI</code>管理界面了。</p>
</li>
</ul>
<h2 id="开启无线"><a href="#开启无线" class="headerlink" title="开启无线"></a>开启无线</h2><p>较新的OpenWrt应该已经自带<code>LuCI</code>图形化界面了，因此直接浏览器打开<a href="192.168.1.1">192.168.1.1</a>就可以看到类似如下界面：</p>
<p><img src="/img/opfirst.png" alt="LuCI"></p>
<p>当然咯，第一次登入肯定是要先设密码的，毕竟也算是一个Linux系统：</p>
<p><img src="/img/oppasswd.png" alt="更改密码"></p>
<p>OpenWrt默认是关闭无线网络的，所以到<code>Network</code>-<code>Wifi</code>下面启用即可：</p>
<p><img src="/img/opwifi.png" alt="启用Wifi"></p>
<p>之后设置SSID和密码就可以通过无线方式连接了。</p>
<h1 id="基本设置"><a href="#基本设置" class="headerlink" title="基本设置"></a>基本设置</h1><p>既然要装上软件，自然要从互联网获取，那么路由器当然要联网咯。先到<code>Network</code>-<code>Interfaces</code>设置WAN口的上网方式，这点和普通路由器没有什么差别，这里不再赘述。</p>
<p>如果觉得英文LuCI使用不便，也可以到<code>System</code>-<code>Software</code>下找到一个叫<code>luci-i18n-base-zh-cn</code>的包装上就行了，当然首先要<code>Update lists</code>一下，之后到<code>System</code>-<code>System</code>下切换成<code>普通话</code>再刷新一下就变成中文界面了。</p>
<p><img src="/img/oplucicn.png" alt="设置中文"></p>
<p>当然，以后要装的部分软件也可以通过上面这种方式安装，但由于有的包官方源里没有，我们在下面使用一种更通用的方法——从命令行安装。</p>
<p>OpenWrt归根结底还是一个<strong>Linux发行版</strong>，所以Linux命令在这里依然适用。</p>
<p>我们还是通过SSH登录：</p>
<pre><code>ssh root@192.168.1.1
</code></pre><p>输入之前设置的密码后，就会看到OpenWrt特有的终端界面：</p>
<pre><code>BusyBox v1.23.2 (2015-07-25 15:09:46 CEST) built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 CHAOS CALMER (15.05, r46767)
 -----------------------------------------------------
  * 1 1/2 oz Gin            Shake with a glassful
  * 1/4 oz Triple Sec       of broken ice and pour
  * 3/4 oz Lime Juice       unstrained into a goblet.
  * 1 1/2 oz Orange Juice
  * 1 tsp. Grenadine Syrup
 -----------------------------------------------------
root@OpenWrt:~# 
</code></pre><p>先更新一下软件源（和LuCI中的软件包刷新列表是一样的）：</p>
<pre><code>opkg update
opkg list-installed
opkg list
</code></pre><p>然后就可以按照自己的需求安装要用的软件了。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-aria2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/2015/12/03/aria2/" class="article-date">
  <time datetime="2015-12-03T15:33:33.000Z" itemprop="datePublished">2015-12-03</time>
</a>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/奇技淫巧/">奇技淫巧</a>►<a class="article-category-link" href="/categories/奇技淫巧/＊nix/">＊nix</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/arbanner.png" rel="gallery_civi1rlux0009jzpr7myq48xl">
        <img src="/img/arbanner.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/03/aria2/">使用aria2多线程下载</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="https://www.shintaku.cc/2015/12/03/aria2/" data-id="civi1rlux0009jzpr7myq48xl" class="article-share-link">Share</a>
      
        <a href="https://www.shintaku.cc/2015/12/03/aria2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unix/">Unix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/下载/">下载</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p><strong>aria2</strong>是一款轻量级多线程的命令行下载工具，支持<strong>HTTP/HTTPS</strong>、<strong>FTP</strong>、<strong>SFTP</strong>、<strong>BitTorrent</strong>和<strong>Metalink</strong>等多种下载方式。程序支持Mac OS X、Linux、Windows等多平台。</p>
<p>这个下载器最大的优点就是多线程。最开始接触它的时候是因为在Mac下下载百度云的资源非常不方便，不借助其他工具只能通过浏览器下载，而且一个线程速度超慢，一不小心就会下载失败。后来从知乎上看到这个神器，<del>用了<em>金坷垃</em>，</del>速度<strong>一千八</strong>。</p>
<h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p>首先到<a href="https://github.com/tatsuhiro-t/aria2/releases" target="_blank" rel="external">GitHub</a>下载对应系统的安装文件进行安装；如果在macOS下也可以通过<code>homebrew</code>安装：</p>
<pre><code>brew install aria2
</code></pre><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>先新建一个配置文件叫<code>aria2.conf</code>：</p>
<pre><code>mkdir ~/.aria2
vi ~/.aria2/aria2.conf
</code></pre><p>放在这个目录下的主要原因是可以在启动时不再指定其配置文件的位置。然后编辑它：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Basic Options</span></div><div class="line"><span class="attr">dir</span>=/Users/<span class="variable">$USER</span>/Downloads</div><div class="line"><span class="attr">input-file</span>=/Users/<span class="variable">$USER</span>/.aria2/session.dat</div><div class="line"><span class="attr">log</span>=/Users/<span class="variable">$USER</span>/.aria2/aria2.log</div><div class="line"><span class="attr">max-concurrent-downloads</span>=<span class="number">15</span></div><div class="line"><span class="attr">max-connection-per-server</span>=<span class="number">15</span></div><div class="line"><span class="attr">check-integrity</span>=<span class="literal">true</span></div><div class="line"><span class="attr">continue</span>=<span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment"># BitTorrent/Metalink Options</span></div><div class="line"><span class="attr">bt-enable-lpd</span>=<span class="literal">true</span></div><div class="line"><span class="attr">bt-max-open-files</span>=<span class="number">16</span></div><div class="line"><span class="attr">bt-max-peers</span>=<span class="number">8</span></div><div class="line"><span class="attr">dht-file-path</span>=/opt/var/aria2/dht.dat</div><div class="line"><span class="attr">dht-file-path6</span>=/opt/var/aria2/dht6.dat</div><div class="line"><span class="attr">dht-listen-port</span>=<span class="number">6801</span></div><div class="line"><span class="comment">#enable-dht6=true</span></div><div class="line"><span class="attr">listen-port</span>=<span class="number">6801</span></div><div class="line"><span class="attr">max-overall-upload-limit</span>=<span class="number">0</span>K</div><div class="line"><span class="attr">seed-ratio</span>=<span class="number">0</span></div><div class="line"></div><div class="line"><span class="comment"># RPC Options</span></div><div class="line"><span class="attr">enable-rpc</span>=<span class="literal">true</span></div><div class="line"><span class="attr">rpc-allow-origin-all</span>=<span class="literal">true</span></div><div class="line"><span class="attr">rpc-listen-all</span>=<span class="literal">true</span></div><div class="line"><span class="attr">rpc-listen-port</span>=<span class="number">6800</span></div><div class="line"><span class="comment">#rpc-secret=123456</span></div><div class="line"><span class="comment">#rpc-secure=true</span></div><div class="line"></div><div class="line"><span class="comment"># Advanced Options</span></div><div class="line"><span class="attr">daemon</span>=<span class="literal">true</span></div><div class="line"><span class="attr">disable-ipv6</span>=<span class="literal">true</span></div><div class="line"><span class="comment">#enable-mmap=true</span></div><div class="line"><span class="attr">force-save</span>=<span class="literal">true</span></div><div class="line"><span class="attr">file-allocation</span>=none</div><div class="line"><span class="attr">log-level</span>=warn</div><div class="line"><span class="attr">max-overall-download-limit</span>=<span class="number">0</span>K</div><div class="line"><span class="attr">save-session</span>=/Users/<span class="variable">$USER</span>/.aria2/session.dat</div><div class="line"><span class="attr">always-resume</span>=<span class="literal">true</span></div><div class="line"><span class="attr">split</span>=<span class="number">10</span></div><div class="line"><span class="attr">min-split-size</span>=<span class="number">10</span>M</div><div class="line"></div><div class="line"><span class="comment"># Pan.baidu.com</span></div><div class="line"><span class="attr">user-agent</span>=netdisk;<span class="number">5.2</span>.<span class="number">6</span>;PC;PC-Windows;<span class="number">6.2</span>.<span class="number">9200</span>;WindowsBaiduYunGuanJia</div><div class="line"><span class="attr">referer</span>=http://pan.baidu.com/disk/home</div></pre></td></tr></table></figure>
<p>配置文件中所有<code>$USER</code>要改成自己的用户名，<code>dir</code>参数设置的是下载路径，也可以按自己的习惯更改；<code>input-file</code>、<code>save-session</code>参数是指定session（保存下载进度）的存储位置，如果没有那个文件可以手动创建：</p>
<pre><code>touch session.dat
</code></pre><p><code>log</code>参数指定log路径，会自动生成。这时可以通过<code>aria2c</code>命令启动服务了。可以通过<code>ps aux | grep aria2c</code>命令检查是否启动成功。</p>
<h1 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h1><p>若要配置macOS开机启动，可以在<code>~/Library/LaunchAgents</code>下创建一个plist文件<code>homebrew.mxcl.aria2.plist</code>，内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">dict</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>homebrew.mxcl.aria2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Program<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/opt/aria2/bin/aria2c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></div></pre></td></tr></table></figure>
<p>编辑完后将将其权限设为<code>-rw-------</code>：</p>
<pre><code>chmod 600 ~/Library/LaunchAgents/homebrew.mxcl.aria2.plist
</code></pre><h1 id="配置GUI"><a href="#配置GUI" class="headerlink" title="配置GUI"></a>配置GUI</h1><p>由于aria2是一个命令行工具，所以在没有其他辅助的情况下需要通过命令行来操作。具体使用方法请参阅<a href="https://aria2.github.io/" target="_blank" rel="external">aria2.github.io</a>。</p>
<p>为了更加便于使用，GitHub上的<a href="https://github.com/ziahamza" target="_blank" rel="external">ziahamza</a>开发了一个WebUI，可以通过网页界面来操作aria2：</p>
<p><img src="/img/arui.png" alt="WebUI">    </p>
<p>简单来说就是打开<a href="http://ziahamza.github.io/webui-aria2/" target="_blank" rel="external">http://ziahamza.github.io/webui-aria2/</a>就能使用了。也可以将<a href="https://github.com/ziahamza/webui-aria2/archive/master.zip" target="_blank" rel="external">项目源码</a>下载下来放到本地或者放到自己的服务器上来用，比如<a href="http://aria.shintaku.cc/" target="_blank" rel="external">http://aria.shintaku.cc/</a>。</p>
<p>打开以后如果右上角出现：</p>
<p><img src="/img/arsuccess.png" alt="连接成功">    </p>
<p>就说明连接成功了，这时就可以直接输入下载链接下载了。</p>
<p>如果连接不成功请到<code>Setting</code>-<code>Connection Setting</code>检查端口是不是6800，并且确保6800端口没被别的服务占用：</p>
<p><img src="/img/arsetting.png" alt="连接设置">    </p>
<h1 id="百度网盘插件"><a href="#百度网盘插件" class="headerlink" title="百度网盘插件"></a>百度网盘插件</h1><p>百度网盘如果使用普通下载的话<del>可能得到的是一个临时的链接？</del>不能断点续传，所以需要一个叫<a href="https://chrome.google.com/webstore/detail/baiduexporter/mjaenbjdjmgolhoafkohbhhbaiedbkno" target="_blank" rel="external">BaiduExporter</a>的Chrome插件像百度云的客户端一样获取地址。如果Chrome商店被墙了也可以到<a href="https://github.com/acgotaku/BaiduExporter/releases" target="_blank" rel="external">GitHub</a>上直接下载<code>crx</code>文件手动添加。</p>
<p>添加成功后再打开百度云会发现多了一个<code>导出下载</code>按钮：</p>
<p><img src="/img/arbaiduyun.png" alt="导出下载">    </p>
<p>打开<code>设置</code>，按照如下设置：</p>
<p><img src="/img/aryunsetting.png" alt="导出设置"></p>
<p>其中<code>User-agent</code>需要设置为<code>netdisk;5.2.7;PC;PC-Windows;6.2.9200;WindowsBaiduYunGuanJia</code>，<code>referer</code>设置为<code>http://pan.baidu.com/disk/home</code>，将aria2伪装成百度云管家来解除限速。</p>
<p>应用后选择百度云上的文件，通过<code>导出下载</code>-<code>ARIA2 RPC</code>：</p>
<p><img src="/img/ardownload.png" alt="下载成功"></p>
<p>这时再通过WebUI查看应当已经有新添加的任务以一千八的速度在下载了。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&lsaquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &rsaquo;</a>
  </nav>
</section>
          
            <div id="ukagaka_panel"></div>

<aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ACG/">ACG</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ACG/Minecraft/">Minecraft</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ACG/艦隊これくしょん/">艦隊これくしょん</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/奇技淫巧/">奇技淫巧</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/奇技淫巧/Android/">Android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/奇技淫巧/Windows/">Windows</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/奇技淫巧/macOS/">macOS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/奇技淫巧/＊nix/">＊nix</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手帐/">手帐</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/手帐/实习/">实习</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/手帐/课程/">课程</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/网络/科学上网/">科学上网</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/网站部署/">网站部署</a><span class="category-list-count">5</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2016/10/31/mac-php/">
              
                <i class="fa-paperclip"></i> 
              
            macOS配置PHP开发环境</a>
          </li>
        
          <li>
            <a class="text" href="/2016/10/10/shell-parallel/">
              
                <i class="fa-paperclip"></i> 
              
            shell脚本内的并发执行</a>
          </li>
        
          <li>
            <a class="text" href="/2016/09/01/ngrok/">
              
                <i class="fa-paperclip"></i> 
              
            搭建Ngrok内网穿透服务</a>
          </li>
        
          <li>
            <a class="text" href="/2016/08/26/denyhosts/">
              
                <i class="fa-paperclip"></i> 
              
            DenyHosts防止ssh暴力登录</a>
          </li>
        
          <li>
            <a class="text" href="/2016/08/06/gfwlist/">
              
                <i class="fa-paperclip"></i> 
              
            GFWlist+ShadowSocks实现路由器透明代理</a>
          </li>
        
          <li>
            <a class="text" href="/2016/07/07/adb/">
              
                <i class="fa-paperclip"></i> 
              
            使用adb工具刷机</a>
          </li>
        
          <li>
            <a class="text" href="/2016/07/01/baidu-interview/">
              
                <i class="fa-paperclip"></i> 
              
            百度PHP实习生面试实录</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/18/dropbear/">
              
                <i class="fa-paperclip"></i> 
              
            OpenWrt上的ssh免密登录</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/01/chinadns/">
              
                <i class="fa-paperclip"></i> 
              
            ChinaDNS+ShadowSocks实现路由器透明代理</a>
          </li>
        
          <li>
            <a class="text" href="/2016/05/20/app/">
              
                <i class="fa-paperclip"></i> 
              
            将jar程序打包成app</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/ChinaDNS/" style="font-size: 10px;">ChinaDNS</a> <a href="/tags/GFWlist/" style="font-size: 10px;">GFWlist</a> <a href="/tags/GoAgent/" style="font-size: 10px;">GoAgent</a> <a href="/tags/LEMP/" style="font-size: 11.25px;">LEMP</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Minecraft/" style="font-size: 11.25px;">Minecraft</a> <a href="/tags/MySQL/" style="font-size: 11.25px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 12.5px;">Nginx</a> <a href="/tags/OpenWrt/" style="font-size: 16.25px;">OpenWrt</a> <a href="/tags/PHP/" style="font-size: 11.25px;">PHP</a> <a href="/tags/Qt/" style="font-size: 10px;">Qt</a> <a href="/tags/SSL/" style="font-size: 10px;">SSL</a> <a href="/tags/ShadowSocks/" style="font-size: 13.75px;">ShadowSocks</a> <a href="/tags/SoftEther/" style="font-size: 10px;">SoftEther</a> <a href="/tags/Unix/" style="font-size: 11.25px;">Unix</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/VPS/" style="font-size: 17.5px;">VPS</a> <a href="/tags/Verilog/" style="font-size: 10px;">Verilog</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/macOS/" style="font-size: 13.75px;">macOS</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/下载/" style="font-size: 10px;">下载</a> <a href="/tags/代理/" style="font-size: 13.75px;">代理</a> <a href="/tags/刷机/" style="font-size: 10px;">刷机</a> <a href="/tags/服务器/" style="font-size: 18.75px;">服务器</a> <a href="/tags/游戏/" style="font-size: 11.25px;">游戏</a> <a href="/tags/科学上网/" style="font-size: 16.25px;">科学上网</a> <a href="/tags/舰队Collection/" style="font-size: 10px;">舰队Collection</a> <a href="/tags/路由器/" style="font-size: 16.25px;">路由器</a>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget widget-background1">   
      	<ul>
	      <li><a href="https://github.com/" target="_blank" title="GitHub">
        <i class="fa-github"></i> GitHub </a></li>
	      
        <li><a href="https://developers.google.com/" target="_blank" title="Google Developers">
        <i class="fa-google"></i> Google Developers </a></li>
	      
        <li><a href="https://github.com/liangzhenduo0608/liangzhenduo0608.github.io" target="_blank" title="github.io">
        <i class="fa-github-square"></i> Recursion </a></li>
          
	    <li><a href="http://xzjqx.me/" target="_blank" title="笑卒见清晰">
        <i class="fa-h-square"></i> 笑卒见清晰 </a></li>

        <li><a href="http://muyus.cc/" target="_blank" title="暮雨今夕">
        <i class="fa-wordpress"></i> 暮雨今夕 </a></li>

        <li><a href="http://zhenlee.cn/" target="_blank" title="Fantasia">
        <i class="fa-wordpress"></i> Fantasia </a></li>

        <li><a href="https://zhengdongjian.xyz/" target="_blank" title="Qyetfu">
        <i class="fa-reorder"></i> Qyetfu </a></li>
    	</ul>
    </div>
</div>


</script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">Statistics
</h3>
    <div class="widget widget-background1">   
      	<a href="https://s05.flagcounter.com/more/779"><img src="https://s05.flagcounter.com/count2/779/bg_3f3f3f/txt_FFFFFF/border_3f3f3f/columns_2/maxflags_32/viewers_0/labels_1/pageviews_1/flags_0/percent_1/" alt="www.shintaku.cc" border="0"></a>
    </div>
</div>


</script>
  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
</aside>

          
        
      </div>
      <footer id="footer">
  
  <div class="outer" align="center">    
    <div class="social-group">
      
      <a href="https://github.com/liangzhenduo0608" target="_blank" title="GitHub"><i class="fa-github"></i></a>
      
      
      <a href="https://plus.google.com/114761524022260759157" target="_blank" title="Google+"><i class="fa-google-plus-official"></i></a>
      
      
      <a href="https://www.facebook.com/100005630052910" target="_blank" title="Facebook"><i class="fa-facebook-official"></i></a>
      
      
      <a href="https://twitter.com/liangzhenduo" target="_blank" title="Twitter" ><i class="fa-twitter"></i></a>
      
      
      <a href="http://www.linkedin.com/in/zhenduo-liang-795110131" target="_blank" title="LinkedIn" ><i class="fa-linkedin"></i></a>
      
      
      <a href="http://weibo.com/378950608" target="_blank" title="Weibo" ><i class="fa-weibo"></i></a>
      
      
      <a href="mailto:liangzhenduo0608@hotmail.com" target="_blank" title="Email" ><i class="fa-envelope-o"></i></a>
      
    </div>
    <div id="footer-info" class="inner" align="center">
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" title="landscape">landscape</a>     &copy; 2016 Shintaku 
    </div>  

  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/gallery" class="mobile-nav-link">Gallery</a>
  
    <a href="/works" class="mobile-nav-link">Works</a>
  
</nav>
    
<script>
  var disqus_shortname = 'shintaku';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div>
</body>
</html>